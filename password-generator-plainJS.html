<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator</title>
    <style>
        body {
            font-family: sans-serif;
            background: #44444E;
            color: #e1e8e7;
            text-align: center;
            padding: 2rem;
        }

        input[type="text"] {
            padding: 0.5rem;
            width: 300px;
            margin-right: 1rem;
        }

        button {
            padding: 0.5rem 1rem;
            cursor: pointer;
            background: #715A5A;
            color: white;
            border: none;
        }

        label {
            margin: 0 1rem;
        }
    </style>
</head>

<body>

    <h1>Password Generator</h1>

    <div>
        <input type="text" id="password" readonly />
        <button id="copyBtn">Copy</button>
    </div>

    <div style="margin-top:1rem;">
        <label>
            Length: <span id="lengthValue">8</span>
            <input type="range" id="length" min="8" max="24" value="8">
        </label>

        <label>
            <input type="checkbox" id="numbers" /> Include Numbers
        </label>

        <label>
            <input type="checkbox" id="special" /> Include Special Characters
        </label>
    </div>

    <div style="margin-top:1rem;">
        <button id="generate">Generate</button>
    </div>

    <script>
        // ----------------------------
        // State (like useState in React)
        // ----------------------------
        const state = {
            length: 8,
            includeNumbers: false,
            includeSpecialChars: false,
            password: ""
        };

        const passwordInput = document.getElementById("password");
        const lengthInput = document.getElementById("length");
        const lengthValue = document.getElementById("lengthValue");
        const numbersInput = document.getElementById("numbers");
        const specialInput = document.getElementById("special");
        const generateBtn = document.getElementById("generate");
        const copyBtn = document.getElementById("copyBtn");

        // ----------------------------
        // Memoized generate function (like useCallback)
        // ----------------------------
        const generatePassword = (() => {
            let cache = null;

            return () => {
                let charset = "QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm";
                if (state.includeNumbers) charset += "0123456789";
                if (state.includeSpecialChars) charset += "!@#$%^&*()_+-=[]{}|;:,.<>?";

                let newPassword = Array.from({ length: state.length }, () =>
                    charset.charAt(Math.floor(Math.random() * charset.length))
                ).join("");

                // only update if changed
                if (newPassword !== cache) {
                    state.password = newPassword;
                    passwordInput.value = state.password;
                    cache = newPassword;
                }
            };
        })();

        // ----------------------------
        // Effect-like: run when dependencies change
        // ----------------------------
        function runEffect() {
            generatePassword();
        }

        // ----------------------------
        // Event listeners (like controlled inputs)
        // ----------------------------
        lengthInput.addEventListener("input", e => {
            state.length = Number(e.target.value);
            lengthValue.textContent = state.length;
            runEffect();
        });

        numbersInput.addEventListener("change", e => {
            state.includeNumbers = e.target.checked;
            runEffect();
        });

        specialInput.addEventListener("change", e => {
            state.includeSpecialChars = e.target.checked;
            runEffect();
        });

        generateBtn.addEventListener("click", runEffect);

        copyBtn.addEventListener("click", () => {
            passwordInput.select();
            document.execCommand("copy");
            alert("Password copied!");
        });

        // ----------------------------
        // Initial run (like useEffect on mount)
        // ----------------------------
        runEffect();
    </script>

</body>

</html>